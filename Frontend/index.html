<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- <script src="main.js"></script> -->
    <title>TeachMe Anatomy - The No.1 Anatomy Learning Resource</title>
    <link rel="stylesheet" href="../style.css">
    <link rel="icon" type="image/svg+xml" href="/icon_folder/eye-solid-full.svg">
    <script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/3.4.0/model-viewer.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<style>
/* 3D model section css */
.hero-model-container {
    width: 100%;
    height: 500px;
    background: linear-gradient(135deg, #e0f2fe 0%, #dbeafe 100%);
    border-radius: 20px;
    box-shadow: 0 10px 40px rgba(0,0,0,0.1);
    overflow: hidden;
    position: relative;
}

.hero-model-container model-viewer {
    width: 100%;
    height: 100%;
    border-radius: 20px;
}

/* Progress bar color */
.hero-model-container model-viewer::part(default-progress-bar) {
    background-color: #3b82f6;
}

/* Responsive adjustments */
@media (max-width: 768px) {
    .hero-model-container {
        height: 400px;
    }
}

@media (max-width: 480px) {
    .hero-model-container {
        height: 350px;
    }
}
</style>
</head>
<body>

    <!-- Header Section -->
    <header>
        <div class="header-top">
            <div class="logo-section">
                <a href="index.html" style="display: flex; align-items: center; gap: 15px; text-decoration: none; color: inherit;">
                    <div class="logo">
                        <img src="/icon_folder/site_icon.png" alt="TeachMe Anatomy Logo">
                    </div>
                    <div class="logo-text">
                        <h1>
                            <span>TeachMe</span>
                            <span>Anatomy</span>
                        </h1>
                    </div>
                </a>
            </div>

            <div class="search-bar">
                <div class="search-container">
                    <span class="search-icon">üîç</span>
                    <input type="text" placeholder="Search the website">
                </div>
            </div>

            <div class="header-links">
                <a href="#">Spotter</a>
                <a href="#">Question Bank</a>
                <a href="#">Flashcards</a>
                <a href="#">Pricing</a>
                <div id="authButtons">
                    <a href="#" onclick="openLoginModal()" class="login-btn">Log In</a>
                </div>
            </div>
        </div>

        <nav class="nav-menu">
            <ul>
                <li><a href="basics.html">The Basics</a></li>
                <li><a href="head.html">Head</a></li>
                <li><a href="neuroanatomy.html">Neuroanatomy</a></li>
                <li><a href="neck.html">Neck</a></li>
                <li><a href="thorax.html">Thorax</a></li>
                <li><a href="back.html">Back</a></li>
                <li><a href="upper-limb.html">Upper Limb</a></li>
                <li><a href="lower-limb.html">Lower Limb</a></li>
                <li><a href="abdomen.html">Abdomen</a></li>
                <li><a href="pelvis.html">Pelvis</a></li>
                <li><a href="3d-body.html">3D Body</a></li>
            </ul>
        </nav>
    </header>

    <!-- Login Modal -->
    <div id="loginModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeLoginModal()">&times;</span>
            <h2>Login to Your Account</h2>
            <form id="loginForm">
                <input type="email" id="loginEmail" placeholder="Email" required>
                <input type="password" id="loginPassword" placeholder="Password" required>
                <button type="submit" class="auth-submit-btn">Login</button>
            </form>
            <p id="loginMessage" class="auth-message"></p>
            <p class="switch-auth">Don't have an account? <a href="#" onclick="switchToRegister()">Register</a></p>
        </div>
    </div>

    <!-- Register Modal -->
    <div id="registerModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeRegisterModal()">&times;</span>
            <h2>Create New Account</h2>
            <form id="registerForm">
                <input type="text" id="registerName" placeholder="Full Name" required>
                <input type="email" id="registerEmail" placeholder="Email" required>
                <input type="password" id="registerPassword" placeholder="Password (min 6 characters)" required>
                <button type="submit" class="auth-submit-btn">Register</button>
            </form>
            <p id="registerMessage" class="auth-message"></p>
            <p class="switch-auth">Already have an account? <a href="#" onclick="switchToLogin()">Login</a></p>
        </div>
    </div>

    <!-- Hero Section -->
  <!-- 3D Model Container (Replace hero-image div) -->
<div class="hero-model-container">
    <model-viewer 
    src="/blender_models/compressed_full_body.glb"
    auto-rotate
    rotation-per-second="25deg">
</model-viewer>
</div>

    <!-- Testimonials Section -->
    <!-- <section class="testimonials-section">
        <div class="container">
            <div class="testimonials-grid">
                <div class="testimonial-card">
                    <div class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
                    <h4>Essential for exam prep!</h4>
                    <p>"TeachMeAnatomy Pro made a huge difference in my first year. The diagrams are so clear, and the quizzes helped me retain key info for exams. It's easy to use, even on my phone, and way less overwhelming than textbooks. Totally worth it!"</p>
                </div>

                <div class="testimonial-card">
                    <div class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
                    <h4>Fast, focused, and practical</h4>
                    <p>"Exactly what I need when revising on a tight schedule. The content is concise, clinically relevant, and great for quick refreshers before theatre or during MRCS prep. I use it almost daily"</p>
                </div>

                <div class="testimonial-card">
                    <div class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
                    <h4>A brilliant teaching resource</h4>
                    <p>"I use TeachMeAnatomy Pro to enhance my lectures and recommend it to students. The diagrams and 3D views are excellent, and it saves me time when preparing materials. It's a reliable, student-friendly tool I trust."</p>
                </div>
            </div>
        </div>
    </section> -->

    <!-- Explore Topics Section -->
    <section class="explore-section">
        <div class="container">
            <h2 class="section-title">Explore Topics</h2>
            
            <div class="topics-grid" id="initialTopics">
                <a href="subpages/basics.html" class="topic-card">
                    <div class="topic-icon">
                        <img src="/icon_folder/basic.png" alt="The Basics">
                    </div>
                    <h3>The Basics</h3>
                    <p class="topic-count">80 Topics</p>
                </a>

                <a href="subpages/head.html" class="topic-card">
                    <div class="topic-icon">
                        <img src="/icon_folder/brain.png" alt="The Head">
                    </div>
                    <h3>The Head</h3>
                    <p class="topic-count">114 Topics</p>
                </a>

                <a href="subpages/neuroanatomy.html" class="topic-card">
                    <div class="topic-icon">
                        <img src="/icon_folder/neuro.png" alt="Neuroanatomy">
                    </div>
                    <h3>Neuroanatomy</h3>
                    <p class="topic-count">40 Topics</p>
                </a>

                <a href="subpages/neck.html" class="topic-card">
                    <div class="topic-icon">
                        <img src="/icon_folder/neck.png" alt="The Neck">
                    </div>
                    <h3>The Neck</h3>
                    <p class="topic-count">52 Topics</p>
                </a>

                <a href="subpages/thorax.html" class="topic-card">
                    <div class="topic-icon">
                        <img src="/icon_folder/ribcage.png" alt="The Thorax">
                    </div>
                    <h3>The Thorax</h3>
                    <p class="topic-count">65 Topics</p>
                </a>

               
            </div>

            <div class="topics-grid hidden" id="additionalTopics">
                <a href="subpages/abdomen.html" class="topic-card">
                    <div class="topic-icon">
                        <img src="/icon_folder/intestine (1).png" alt="Abdomen">
                    </div>
                    <h3>Abdomen</h3>
                    <p class="topic-count">88 Topics</p>
                </a>

                

                <a href="subpages/3d-body.html" class="topic-card">
                    <div class="topic-icon">
                        <img src="/icon_folder/3dbody.png" alt="3D Body">
                    </div>
                    <h3>3D Body</h3>
                    <p class="topic-count">Interactive Models</p>
                </a>

                
                <a href="#" class="topic-card">
                    <div class="topic-icon">
                        <img src="/icon_folder/lungs (1).png" alt="Respiratory">
                    </div>
                    <h3>Respiratory System</h3>
                    <p class="topic-count">48 Topics</p>
                </a>

                

                <a href="#" class="topic-card">
                    <div class="topic-icon">
                        <img src="/icon_folder/kidneys.png" alt="Reproductive">
                    </div>
                    <h3>The Kidney</h3>
                    <p class="topic-count">54 Topics</p>
                </a> 

                <a href="#" class="topic-card">
                    <div class="topic-icon">
                        <img src="/icon_folder/muscle-cell.png" alt="Muscular">
                    </div>
                    <h3>Muscular System</h3>
                    <p class="topic-count">95 Topics</p>
                </a>

                
            </div>

            <div class="view-all-btn">
                <button id="viewAllBtn" class="btn-view-all" onclick="toggleTopics()">View all ‚Üí</button>
            </div>
        </div>
    </section>

    <!-- Recently Updated Section -->
    <!-- <section class="recently-updated-section">
        <div class="container">
            <h2 class="section-title">Recently Updated</h2>
            
            <div class="articles-grid">
                <article class="article-card">
                    <div class="article-image">
                        <img src="images/article-thorax.jpg" alt="The Tracheobronchial Tree">
                    </div>
                    <div class="article-content">
                        <p class="article-category">ORGANS OF THE THORAX</p>
                        <h3>The Tracheobronchial Tree</h3>
                        <p class="article-date">Last updated Nov 2025</p>
                    </div>
                </article>

                <article class="article-card">
                    <div class="article-image">
                        <img src="images/article-gallbladder.jpg" alt="The Gallbladder">
                    </div>
                    <div class="article-content">
                        <p class="article-category">THE ACCESSORY ORGANS OF THE ABDOMEN</p>
                        <h3>The Gallbladder</h3>
                        <p class="article-date">Last updated Nov 2025</p>
                    </div>
                </article>

                <article class="article-card">
                    <div class="article-image">
                        <img src="images/article-lower-limb.jpg" alt="Nerves of Lower Limb">
                    </div>
                    <div class="article-content">
                        <p class="article-category">NERVES OF THE LOWER LIMB</p>
                        <h3>The Cutaneous Innervation of the Lower Limb</h3>
                        <p class="article-date">Last updated Nov 2025</p>
                    </div>
                </article>
            </div>
        </div>
    </section> -->

    <!-- CTA Section -->
    <section class="cta-section">
        <div class="container">
            <h2>Ready to Master Anatomy?</h2>
            <p>Start your journey today and join millions of successful learners</p>
            <div class="cta-buttons">
                <a href="#" class="btn btn-primary">Get Started Free</a>
                <a href="#" class="btn btn-secondary">Explore Content</a>
            </div>
        </div>
    </section>

    <!-- Comments Section -->
    <section class="comments-section">
        <div class="container">
            <div class="comments-header">
                <h2>üí¨ Discussion & Comments</h2>
                <p class="comments-count">Join the conversation (<span id="commentCount">0</span> comments)</p>
            </div>

            <div class="comment-form-container">
                <div class="user-avatar">
                    <div class="avatar-circle">üë§</div>
                </div>
                <form id="commentForm" class="comment-form">
                    <textarea 
                        id="commentText" 
                        placeholder="Share your thoughts, questions, or insights about this topic..."
                        rows="3"
                        required
                        maxlength="1000"
                    ></textarea>
                    <div class="comment-form-footer">
                        <span class="char-count"><span id="charCount">0</span>/1000</span>
                        <button type="submit" class="btn-submit-comment">
                            <span class="btn-text">Post Comment</span>
                            <span class="btn-loader" style="display: none;">‚è≥</span>
                        </button>
                    </div>
                </form>
            </div>

            <div class="comments-list" id="commentsList">
                <div class="comments-loading" id="commentsLoading">
                    <div class="loading-spinner"></div>
                    <p>Loading comments...</p>
                </div>

                <div class="comments-empty" id="commentsEmpty" style="display: none;">
                    <div class="empty-icon">üí≠</div>
                    <h3>No comments yet</h3>
                    <p>Be the first to share your thoughts!</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <h4>TeachMe Anatomy</h4>
                    <p>The trusted anatomy learning resource for students and professionals worldwide.</p>
                </div>

                <div class="footer-column">
                    <h4>Quick Links</h4>
                    <ul>
                        <li><a href="#">About Us</a></li>
                        <li><a href="#">Contact</a></li>
                        <li><a href="#">Privacy Policy</a></li>
                        <li><a href="#">Terms of Service</a></li>
                    </ul>
                </div>

                <div class="footer-column">
                    <h4>Resources</h4>
                    <ul>
                        <li><a href="#">Blog</a></li>
                        <li><a href="#">Help Center</a></li>
                        <li><a href="#">Student Resources</a></li>
                        <li><a href="#">Educator Resources</a></li>
                    </ul>
                </div>

                <div class="footer-column">
                    <h4>Connect With Us</h4>
                    <div class="social-icons">
<a href="https://facebook.com" target="_blank">
    <i class="fab fa-facebook fa-2x"></i>
</a>
                        <a href="https://twitter.com" target="_blank">
    <i class="fab fa-twitter fa-2x"></i>
</a>

<a href="https://instagram.com" target="_blank">
    <i class="fab fa-instagram fa-2x"></i>
</a>

<a href="https://linkedin.com" target="_blank">
    <i class="fab fa-linkedin fa-2x"></i>
</a>
 </div>
                </div>
            </div>

            <div class="footer-bottom">
                <p>&copy; 2025 TeachMeAnatomy. All rights reserved.</p>
            </div>
        </div>
    </footer>

</body>
</html>
<script>
// ==========================================
// API Configuration
// ==========================================
const API_URL = 'http://localhost:5000/api';

// ==========================================
// Toggle Topics Function
// ==========================================
function toggleTopics() {
    const additionalTopics = document.getElementById('additionalTopics');
    const viewAllBtn = document.getElementById('viewAllBtn');
    
    if (additionalTopics.classList.contains('hidden')) {
        additionalTopics.classList.remove('hidden');
        viewAllBtn.textContent = 'Show less ‚Üë';
        additionalTopics.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
    } else {
        additionalTopics.classList.add('hidden');
        viewAllBtn.textContent = 'View all ‚Üí';
        document.getElementById('initialTopics').scrollIntoView({ behavior: 'smooth', block: 'nearest' });
    }
}

// ==========================================
// Check Authentication Status on Load
// ==========================================
document.addEventListener('DOMContentLoaded', () => {
    checkAuthStatus();
});

async function checkAuthStatus() {
    const token = localStorage.getItem('token');
    const authButtons = document.getElementById('authButtons');

    if (token) {
        try {
            const response = await fetch(`${API_URL}/auth/me`, {
                headers: { 'Authorization': `Bearer ${token}` }
            });

            if (response.ok) {
                const data = await response.json();
                const user = data.data.user;
                authButtons.innerHTML = `
                    <span style="color: white; margin-right: 15px; font-size: 15px;">
                        üëã Welcome, ${user.name}
                    </span>
                    <a href="#" onclick="logout()" class="login-btn">Logout</a>
                `;
            } else {
                showLoginButton();
            }
        } catch (error) {
            console.error('Auth check failed:', error);
            showLoginButton();
        }
    } else {
        showLoginButton();
    }
}

function showLoginButton() {
    const authButtons = document.getElementById('authButtons');
    authButtons.innerHTML = '<a href="#" onclick="openLoginModal()" class="login-btn">Log In</a>';
}

// ==========================================
// Modal Functions
// ==========================================
function openLoginModal() {
    document.getElementById('loginModal').style.display = 'block';
}

function closeLoginModal() {
    document.getElementById('loginModal').style.display = 'none';
    document.getElementById('loginForm').reset();
    document.getElementById('loginMessage').textContent = '';
}

function openRegisterModal() {
    document.getElementById('registerModal').style.display = 'block';
}

function closeRegisterModal() {
    document.getElementById('registerModal').style.display = 'none';
    document.getElementById('registerForm').reset();
    document.getElementById('registerMessage').textContent = '';
}

function switchToRegister() {
    closeLoginModal();
    openRegisterModal();
}

function switchToLogin() {
    closeRegisterModal();
    openLoginModal();
}

// Close modal on outside click
window.onclick = (event) => {
    const loginModal = document.getElementById('loginModal');
    const registerModal = document.getElementById('registerModal');
    if (event.target == loginModal) closeLoginModal();
    if (event.target == registerModal) closeRegisterModal();
};

// ==========================================
// Login Functionality
// ==========================================
document.getElementById('loginForm').addEventListener('submit', async (e) => {
    e.preventDefault();

    const email = document.getElementById('loginEmail').value.trim();
    const password = document.getElementById('loginPassword').value;
    const messageEl = document.getElementById('loginMessage');
    const submitBtn = e.target.querySelector('button');

    submitBtn.disabled = true;
    submitBtn.textContent = 'Logging in...';
    messageEl.textContent = '';

    try {
        const response = await fetch(`${API_URL}/auth/login`, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ email, password })
        });

        const data = await response.json();

        if (response.ok) {
            messageEl.style.color = '#10b981';
            messageEl.textContent = '‚úÖ Login successful! Redirecting...';
            
            localStorage.setItem('token', data.data.token);
            localStorage.setItem('user', JSON.stringify(data.data.user));
            
            setTimeout(() => {
                closeLoginModal();
                location.reload();
            }, 1000);
        } else {
            messageEl.style.color = '#ef4444';
            messageEl.textContent = '‚ùå ' + (data.message || 'Login failed');
            submitBtn.disabled = false;
            submitBtn.textContent = 'Login';
        }
    } catch (error) {
        console.error('Login error:', error);
        messageEl.style.color = '#ef4444';
        messageEl.textContent = '‚ùå Cannot connect to server. Please ensure backend is running.';
        submitBtn.disabled = false;
        submitBtn.textContent = 'Login';
    }
});

// ==========================================
// Register Functionality
// ==========================================
document.getElementById('registerForm').addEventListener('submit', async (e) => {
    e.preventDefault();

    const name = document.getElementById('registerName').value.trim();
    const email = document.getElementById('registerEmail').value.trim();
    const password = document.getElementById('registerPassword').value;
    const messageEl = document.getElementById('registerMessage');
    const submitBtn = e.target.querySelector('button');

    if (password.length < 6) {
        messageEl.style.color = '#ef4444';
        messageEl.textContent = '‚ùå Password must be at least 6 characters';
        return;
    }

    submitBtn.disabled = true;
    submitBtn.textContent = 'Creating account...';
    messageEl.textContent = '';

    try {
        const response = await fetch(`${API_URL}/auth/register`, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ name, email, password })
        });

        const data = await response.json();

        if (response.ok) {
            messageEl.style.color = '#10b981';
            messageEl.textContent = 'Account created successfully!';
            
            localStorage.setItem('token', data.data.token);
            localStorage.setItem('user', JSON.stringify(data.data.user));
            
            setTimeout(() => {
                closeRegisterModal();
                location.reload();
            }, 1000);
        } else {
            messageEl.style.color = '#ef4444';
            messageEl.textContent = '‚ùå ' + (data.message || 'Registration failed');
            submitBtn.disabled = false;
            submitBtn.textContent = 'Register';
        }
    } catch (error) {
        console.error('Register error:', error);
        messageEl.style.color = '#ef4444';
        messageEl.textContent = 'Cannot connect to server. Please ensure backend is running.';
        submitBtn.disabled = false;
        submitBtn.textContent = 'Register';
    }
});

// ==========================================
// Logout Functionality
// ==========================================
function logout() {
    if (confirm('Are you sure you want to logout?')) {
        localStorage.removeItem('token');
        localStorage.removeItem('user');
        alert('‚úÖ Logged out successfully!');
        location.reload();
    }
}

// ==========================================
// COMMENTS FUNCTIONALITY
// ==========================================

document.addEventListener('DOMContentLoaded', function() {
    const commentForm = document.getElementById('commentForm');
    const commentText = document.getElementById('commentText');
    const charCount = document.getElementById('charCount');
    const commentsList = document.getElementById('commentsList');
    const commentsLoading = document.getElementById('commentsLoading');
    const commentsEmpty = document.getElementById('commentsEmpty');
    const commentCount = document.getElementById('commentCount');

    // Get current page ID from URL
    const pageId = window.location.pathname.split('/').pop().replace('.html', '') || 'basics';

    // Character counter
    if (commentText) {
        commentText.addEventListener('input', function() {
            charCount.textContent = this.value.length;
        });
    }

    // Load comments on page load
    loadComments();

    // Submit comment
    if (commentForm) {
        commentForm.addEventListener('submit', async function(e) {
            e.preventDefault();

            const token = localStorage.getItem('token');
            if (!token) {
                alert('Please login to post a comment');
                if (typeof openLoginModal === 'function') {
                    openLoginModal();
                }
                return;
            }

            const content = commentText.value.trim();
            if (!content) return;

            const submitBtn = this.querySelector('.btn-submit-comment');
            const btnText = submitBtn.querySelector('.btn-text');
            const btnLoader = submitBtn.querySelector('.btn-loader');

            try {
                submitBtn.disabled = true;
                btnText.style.display = 'none';
                btnLoader.style.display = 'inline';

                const response = await fetch(`${API_URL}/comments`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${token}`
                    },
                    body: JSON.stringify({
                        articleId: pageId,
                        content: content
                    })
                });

                const data = await response.json();

                if (response.ok) {
                    commentText.value = '';
                    charCount.textContent = '0';
                    loadComments();
                    showNotification('‚úÖ Comment posted successfully!', 'success');
                } else {
                    throw new Error(data.message || 'Failed to post comment');
                }

            } catch (error) {
                console.error('Error posting comment:', error);
                showNotification('‚ùå Failed to post comment. Please try again.', 'error');
            } finally {
                submitBtn.disabled = false;
                btnText.style.display = 'inline';
                btnLoader.style.display = 'none';
            }
        });
    }

    // Load comments from API
    async function loadComments() {
        try {
            commentsLoading.style.display = 'block';
            commentsEmpty.style.display = 'none';
            
            const existingComments = commentsList.querySelectorAll('.comment-card');
            existingComments.forEach(card => card.remove());

            const response = await fetch(`${API_URL}/comments/${pageId}`);
            const data = await response.json();

            commentsLoading.style.display = 'none';

            if (response.ok && data.data.comments.length > 0) {
                const comments = data.data.comments;
                commentCount.textContent = comments.length;

                comments.forEach(comment => {
                    const commentCard = createCommentCard(comment);
                    commentsList.appendChild(commentCard);
                });
            } else {
                commentsEmpty.style.display = 'block';
                commentCount.textContent = '0';
            }

        } catch (error) {
            console.error('Error loading comments:', error);
            commentsLoading.style.display = 'none';
            commentsEmpty.style.display = 'block';
        }
    }

    // Create comment card HTML
    function createCommentCard(comment) {
        const card = document.createElement('div');
        card.className = 'comment-card';
        
        const timeAgo = getTimeAgo(new Date(comment.createdAt));
        const avatarEmoji = getRandomAvatar();

        card.innerHTML = `
            <div class="comment-header">
                <div class="comment-avatar">${avatarEmoji}</div>
                <div class="comment-author-info">
                    <div class="comment-author">${escapeHtml(comment.user?.name || 'Anonymous')}</div>
                    <div class="comment-time">${timeAgo}</div>
                </div>
            </div>
            <div class="comment-content">${escapeHtml(comment.content)}</div>
            <div class="comment-actions">
                <button class="comment-action-btn" onclick="likeComment(${comment.id})">
                    üëç Like <span class="like-count">${comment.likes || 0}</span>
                </button>
            </div>
        `;

        return card;
    }

    // Helper functions
    function getTimeAgo(date) {
        const seconds = Math.floor((new Date() - date) / 1000);
        
        const intervals = {
            year: 31536000,
            month: 2592000,
            week: 604800,
            day: 86400,
            hour: 3600,
            minute: 60
        };

        for (const [unit, secondsInUnit] of Object.entries(intervals)) {
            const interval = Math.floor(seconds / secondsInUnit);
            if (interval >= 1) {
                return `${interval} ${unit}${interval > 1 ? 's' : ''} ago`;
            }
        }

        return 'Just now';
    }

    function getRandomAvatar() {
        const avatars = ['üë®', 'üë©', 'üßë', 'üë§', 'üòä', 'üéì', 'üë®‚Äç‚öïÔ∏è', 'üë©‚Äç‚öïÔ∏è'];
        return avatars[Math.floor(Math.random() * avatars.length)];
    }

    function escapeHtml(text) {
        const div = document.createElement('div');
        div.textContent = text;
        return div.innerHTML;
    }

    function showNotification(message, type) {
        alert(message);
    }
});

// Like comment function
function likeComment(commentId) {
    const token = localStorage.getItem('token');
    if (!token) {
        alert('Please login to like comments');
        return;
    }

    fetch(`${API_URL}/comments/${commentId}/like`, {
        method: 'POST',
        headers: {
            'Authorization': `Bearer ${token}`
        }
    })
    .then(res => res.json())
    .then(data => {
        if (data.success) {
            // Update like count in UI
            const likeBtn = event.target.closest('.comment-action-btn');
            const likeCount = likeBtn.querySelector('.like-count');
            if (likeCount) {
                likeCount.textContent = data.data.likes;
            }
        }
    })
    .catch(err => console.error('Like error:', err));
}

// Read More/Less functionality
document.addEventListener('DOMContentLoaded', function() {
    const overviewSection = document.querySelector('.overview-section');
    
    if (overviewSection) {
        const container = overviewSection.querySelector('.container');
        const allElements = Array.from(container.children);
        
        const firstH2 = container.querySelector('h2');
        const firstP = container.querySelector('p');
        
        const expandableDiv = document.createElement('div');
        expandableDiv.className = 'expandable-text';
        expandableDiv.style.display = 'none';
        
        let foundFirst = false;
        allElements.forEach(element => {
            if (element === firstP) {
                foundFirst = true;
                return;
            }
            if (foundFirst) {
                expandableDiv.appendChild(element.cloneNode(true));
                element.remove();
            }
        });
        
        const readMoreLink = document.createElement('p');
        readMoreLink.className = 'read-more-link';
        readMoreLink.innerHTML = '<a href="javascript:void(0)">+ Read more</a>';
        
        const readLessLink = document.createElement('p');
        readLessLink.className = 'read-less-link';
        readLessLink.innerHTML = '<a href="javascript:void(0)">- Read less</a>';
        
        firstP.after(readMoreLink);
        readMoreLink.after(expandableDiv);
        expandableDiv.appendChild(readLessLink);
        
        readMoreLink.querySelector('a').addEventListener('click', function(e) {
            e.preventDefault();
            expandableDiv.style.display = 'block';
            readMoreLink.style.display = 'none';
            expandableDiv.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        });
        
        readLessLink.querySelector('a').addEventListener('click', function(e) {
            e.preventDefault();
            expandableDiv.style.display = 'none';
            readMoreLink.style.display = 'block';
            firstH2.scrollIntoView({ behavior: 'smooth', block: 'start' });
        });
    }
});

</script>